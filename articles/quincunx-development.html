<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Contributing to quincunx development • quincunx</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Nunito-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Inconsolata-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Contributing to quincunx development">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">quincunx</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.9</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>PGS Catalog Concepts</h6></li>
    <li><a class="dropdown-item" href="../articles/identifiers.html">Identifiers</a></li>
    <li><a class="dropdown-item" href="../articles/pgs-construction-process.html">PGS Construction Process and Stages</a></li>
    <li><a class="dropdown-item" href="../articles/cohorts-samples-sample-sets.html">Cohorts, Samples and Sample Sets</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Getting PGS Catalog Data</h6></li>
    <li><a class="dropdown-item" href="../articles/getting-pgs-scores.html">Getting PGS Scores</a></li>
    <li><a class="dropdown-item" href="../articles/getting-pgs-publications.html">Getting PGS Publications</a></li>
    <li><a class="dropdown-item" href="../articles/getting-pgs-sample-sets.html">Getting PGS Sample Sets</a></li>
    <li><a class="dropdown-item" href="../articles/getting-pgs-performance-metrics.html">Getting PGS Performance Metrics</a></li>
    <li><a class="dropdown-item" href="../articles/getting-traits.html">Getting Traits</a></li>
    <li><a class="dropdown-item" href="../articles/getting-cohorts.html">Getting Cohorts</a></li>
    <li><a class="dropdown-item" href="../articles/getting-releases.html">PGS Catalog Releases</a></li>
    <li><a class="dropdown-item" href="../articles/pgs-scoring-file.html">PGS scoring file</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Wrangling PGS Catalog Data</h6></li>
    <li><a class="dropdown-item" href="../articles/pgs-cat-ent-subsetting.html">PGS Catalog Entity Subsetting</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Case Studies</h6></li>
    <li><a class="dropdown-item" href="../articles/risk-strat-brs-patients.html">Risk of Brugada syndrome patients</a></li>
    <li><a class="dropdown-item" href="../articles/pgs-scores-mavaddat.html">Exploring PGS scores by Mavaddat et al. (2018)</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ramiromagno/quincunx/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Contributing to quincunx development</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ramiromagno/quincunx/blob/master/vignettes/quincunx-development.Rmd" class="external-link"><code>vignettes/quincunx-development.Rmd</code></a></small>
      <div class="d-none name"><code>quincunx-development.Rmd</code></div>
    </div>

    
    
<p>If you feel like contributing to quincunx source code please feel
free to make a pull request or ask questions in GitHub Issues.</p>
<div class="section level2">
<h2 id="api-underlying-retrieval-functions">API underlying retrieval functions<a class="anchor" aria-label="anchor" href="#api-underlying-retrieval-functions"></a>
</h2>
<p>To gain a glimpse of how the core functions of quincunx are organised
and dependent on each other please check out this table:
<img src="../reference/figures/quincunx_core_fns_nofonts.svg" alt="Quincunx core functions" width="100%" style="display: block; margin: auto;"></p>
<div class="section level3">
<h3 id="family-of-get_entities-functions">Family of <code>get_&lt;entities&gt;()</code> functions<a class="anchor" aria-label="anchor" href="#family-of-get_entities-functions"></a>
</h3>
<p>At the exposed API, the family of functions that the user sees are
those <code>get_&lt;entities&gt;()</code>, e.g.,
<code><a href="../reference/get_scores.html">get_scores()</a></code> or <code><a href="../reference/get_sample_sets.html">get_sample_sets()</a></code>. The family
of internal functions <code>coerce_to_S4_&lt;entities&gt;()</code>
translate a list of relational tibbles to an S4 object. The advantage of
having these lists of tibbles encapsulated as S4 objects is that you can
then benefit from methods written for them. The placeholder
<code>&lt;entities&gt;</code> stands for one of: <code>scores</code>,
<code>publications</code>, <code>sample_sets</code>,
<code>performance_metrics</code>, <code>traits</code>,
<code>trait_categories</code>, <code>cohorts</code> or
<code>releases</code>.</p>
</div>
<div class="section level3">
<h3 id="family-of-get_endpoint-functions">Family of <code>get_&lt;endpoint&gt;</code> functions<a class="anchor" aria-label="anchor" href="#family-of-get_endpoint-functions"></a>
</h3>
<p><code>&lt;endpoint&gt;</code> is typically a loosely based snake case
name of a PGS Catalog endpoint, e.g., the endpoint
<code>'/rest/score/search'</code> used with the <code>trait_id</code>
parameter has the corresponding quincunx function:
<code>get_score_by_trait_id()</code>.</p>
</div>
<div class="section level3">
<h3 id="family-of-get_type-functions">Family of <code>get_&lt;type&gt;</code> functions<a class="anchor" aria-label="anchor" href="#family-of-get_type-functions"></a>
</h3>
<p><code>&lt;type&gt;</code> is often the name of a PGS Catalog entity
in the singular, e.g., <code>score</code> for polygenic scores, that
corresponds to the function <code>get_score()</code>. This family of
functions will return always the same type of return value, that is a
list of relational tibbles. The heavy lifting of translation from JSON
to tibbles happens in <code>as_tidy_tables_&lt;entities&gt;</code>.</p>
</div>
<div class="section level3">
<h3 id="low-level-functions-get-request_all-and-request">Low-level functions: <code>get()</code>, <code>request_all()</code>
and <code>request()</code><a class="anchor" aria-label="anchor" href="#low-level-functions-get-request_all-and-request"></a>
</h3>
<p>At the bottom of the stack <code><a href="https://httr.r-lib.org/reference/GET.html" class="external-link">httr::GET()</a></code> is the actual
function that retrieves a JSON response from a specific URL.
<code><a href="../reference/request.html">request()</a></code> is quincunx’s fundamental function after
<code><a href="https://httr.r-lib.org/reference/GET.html" class="external-link">httr::GET()</a></code>. <code><a href="../reference/request.html">request()</a></code> calls a <a href="https://github.com/r-lib/memoise" class="external-link">memoised</a> version of
<code><a href="https://httr.r-lib.org/reference/GET.html" class="external-link">httr::GET()</a></code> —<code>memoised_GET()</code>— to make the
package more agile and to avoid hammering the REST API server
unnecessarily. <code><a href="../reference/request_all.html">request_all()</a></code> does essentially the same as
<code><a href="../reference/request.html">request()</a></code> but handles pagination, meaning that it will
follow all pages until it has gathered all results. The
<code><a href="https://rdrr.io/r/base/get.html" class="external-link">get()</a></code> function adds metadata columns to the tibbles,
namely, <code>..resource</code> (full endpoint URL),
<code>..timestamp</code> (endpoint retrieval timestamp),
<code>..page</code> (endpoint pagination).</p>
</div>
</div>
<div class="section level2">
<h2 id="s4-classes">S4 classes<a class="anchor" aria-label="anchor" href="#s4-classes"></a>
</h2>
<p>S4 classes are defined and documented in source files named
<code>class-&lt;entities&gt;.R</code>, e.g., <code>class-scores.R</code>
or <code>class-performance_metrics.R</code></p>
</div>
<div class="section level2">
<h2 id="parsing-of-json-to-tibbles">Parsing of JSON to tibbles<a class="anchor" aria-label="anchor" href="#parsing-of-json-to-tibbles"></a>
</h2>
<p>The conversion from JSON use done using the terrific package <a href="https://github.com/colearendt/tidyjson" class="external-link">tidyjson</a>. The source
files containing the code for this are
<code>parse-&lt;entities&gt;.R</code>, e.g.,
<code>parse-cohorts.R</code> or <code>parse-publications.R</code>. Some
parsing functions are also used across different entities, and in those
cases they have dedicated source files:
<code>unwrap_&lt;entities&gt;.R</code>, e.g.,
<code>unwrap_efotrait.R</code> or <code>unwrap_sample.R</code>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.pattern.institute/team/rmagno/" class="external-link">Ramiro Magno</a>, <a href="http://iduarte.eu/" class="external-link">Isabel Duarte</a>, Ana-Teresa Maia, <a href="https://cintesis.eu/" class="external-link"><img src="https://rmagno.eu/quincunx/reference/figures/cintesis.svg" height="24" alt="CINTESIS logo"></a>, <a href="https://www.pattern.institute/" class="external-link"><img src="https://rmagno.eu/quincunx/reference/figures/pi-logotype-canonical-whole-v01.svg" height="24" alt="Pattern Institute logo"></a>.</p>
</div>

<div class="pkgdown-footer-right">

</div>

    </footer>
</div>





  </body>
</html>
